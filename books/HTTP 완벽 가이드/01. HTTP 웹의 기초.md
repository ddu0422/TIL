## 1.1 HTTP: 인터넷의 멀티미디어 배달부

HTTP는 대량의 정보를 `빠르고, 간편하고, 정확하게` 사람들의 PC에 설치된 브라우저로 옮겨준다.
HTTP는 `신뢰성 있는 데이터 전송 프로토콜`을 사용하기 때문에, 전송 중 손상되거나 꼬이지 않음을 보장한다.

## 1.2 웹 클라이언트와 서버

웹 서버

- HTTP 프로토콜로 의사소통하기 때문에 `HTTP 서버`라고 불린다.
- HTTP 서버는 `데이터를 저장`하고, HTTP 클라이언트가 요청한 `데이터를 제공`한다.

## 1.3 리소스

- 웹 서버는 웹 리소스를 관리하고 제공한다.
- 리소스란?
  - `웹 컨텐츠`
    - ex. 정적 파일 (HTML 파일, JPEG 이미지 등)

### 1.3.1 미디어 타입

- HTTP는 웹에서 전송되는 객체 각각에 `MIME 타입`을 붙인다.  
  (MIME, Multipurpose Internet Mail Extensions)
- MIME 타입은 사선으로 구분된 `주 타입과 부 타입`으로 이루어진 문자열 라벨이다.

<br />

```text
text/html: HTML
text/plain: plain ASCII
image/jpeg: JPEG 이미지
image/gif: GIF 이미지
...
```

### 1.3.2 URI

- 웹 서버 리소스는 `각자 이름`을 가지고 있기 때문에 클라이언트는 관심 있는 리소스를 지목할 수 있다.
- 서버 리소스 이름은 `통합 자원 식별자`(`URI`, uniform resource identifier)라고 불린다.
- URI의 종류는 `URL과 URN`이 있다.

<br />

```text
# URI 예시
http://www.joes-hardware.com/special/saw-blade.gif
```

### 1.3.3 URL

- `통합 자원 지시자`(`URL`, uniform resource locator)은 특정 서버의 한 리소스에 대한 구체적인 위치를 서술한다.
- URL은 리소스가 정확히 어디에 있고 어떻게 접근할 수 있는지 분명히 알려준다.
- 대부분의 URI는 `URL`이다.

<br  />

```text
http://www.joes-hardware.com/special/saw-blade.gif

# URI의 표준 포맷
scheme: http://
address: www.joes-hardware.com
resource: /special/saw-blade.gif
```

### 1.3.4 URN

- `통합 자원 이름`(`URN`, uniform resource name)은 위치에 영향 받지 않는 유일무이한 이름 역할을 한다.
- URN은 여전히 실험 중인 상태

## 1.4 트랜잭션

- HTTP 트랜잭션은 `요청 명령`과 `응답 결과`로 구성
- HTTP 메시지라고 불리는 `정형화된 데이터 덩어리`를 이용해 이루어짐

### 1.4.1 메서드

- HTTP 메서드라고 불리는 여러 가지 종류의 `요청 명령`을 지원
- HTTP 요청 메시지는 `한 개의 메서드`를 갖는다.

| HTTP 메서드 | 설명                                                                 |
| :---------: | :------------------------------------------------------------------- |
|     GET     | 서버에서 클라이언트로 저장한 리소스를 보내라.                        |
|     PUT     | 클라이언트에서 서버로 보낸 데이터를 지정한 이름의 리소스로 저장하라. |
|   DELETE    | 지정한 리소스를 서버에서 삭제해라.                                   |
|    POST     | 클라이언트 데이터를 서버 게이트웨이 애플리케이션으로 보내라.         |
|    HEAD     | 지정한 리소스에 대한 응답에서, HTTP 헤더 부분만 보내라               |

### 1.4.2 상태 코드

- HTTP 응답 메시지는 상태 코드와 반환된다.

| HTTP 상태 코드 | 설명                                           |
| :------------: | :--------------------------------------------- |
|      200       | 좋다. 문서가 바르게 반환되었다.                |
|      302       | 다시 보내라. 다른 곳에 가서 리소스를 가져와라. |
|      404       | 없음. 리소스를 찾을 수 없다.                   |

### 1.4.3 웹페이지는 여러 객체로 이루어질 수 있다.

- 애플리케이션은 하나의 작업을 수행하기 위해 `여러 HTTP 트랜잭션을 수행`한다.
- 웹페이지는 보통 여러 리소스들의 집합체이다.

## 1.5 메시지

- HTTP 메시지는 단순한 줄 단위의 문자열이다.
- HTTP 요청 메시지: Client -> Server
- HTTP 응답 메시지: Server -> Client
- HTTP 메시지는 `시작줄, 헤더, 본문`으로 이루어진다.

#### 시작줄

요청: 무엇읋 해야하는지 <br>
응답: 무슨 일이 일어났는지

#### 헤더

헤더 필드는 콜론(:)으로 구분되어 있는 하나의 이름과 하나의 값으로 구성된다.  
헤더 필드를 추가하려면 그저 한 줄을 더하기만 하면 된다.  
헤더는 빈 줄로 끝난다.

#### 본문

요청: 웹 서버로 데이터를 실어 보낸다.
응답: 클라이언트로 데이터를 반환한다.

### 1.5.1 간단한 메시지의 예

```text
# 요청 메시지
GET /tools.html HTTP/1.0
User-agent: ~
Host: www.joes-hardware.com
Accept: text/html, image/gif

# 응답 메시지
HTTP/1.0 200 OK
Date: Sun, ~~
Last-modified: Tue, ~
Content-type: text/html

<html>
응답 본문
</html>
```

## 1.6 TCP 커넥션

메시지가 TCP(Transmission Control Protocol) 커넥션을 통해 한 곳에서 다른 곳으로 옮겨진다.

### 1.6.1 TCP/IP

- HTTP는 Application Layer Protocol이다.
- HTTP는 네트워크 통신의 세부사항을 TCP/IP에게 맡긴다.
- TCP
  - 오류 없는 데이터 전송ß
  - 순서에 맞는 전달 (데이터는 언제나 보낸 순서대로 도착)
  - 조각나지 않는 데이터 스트림 (언제든 어떤 크기로든 보냄)
- TCP/IP
  - TCP와 IP가 층을 이루는 패킷 교환 네트워크 프로토콜 집합
  - 각 네트워크와 하드웨어의 특성을 숨기고, 서로 신뢰성 있는 의사소통 진행

### 1.6.2 접속, IP 주소 그리고 포트번호

- IP(Internet Protocol) 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 맺은 후 HTTP 클라이언트가 서버에 메시지 전송
- TCP에서는 서버 컴퓨터에 대한 IP 주소와 그 서버에서 실행중인 프로그램이 사용 중인 포트번호 필요
  - URL 이용하여 IP주소, 포트번호를 알아냄
- HTML 리소스 요청 동작 방식
  - 웹브라우저는 서버의 URL에서 호스트 명 추출
  - 웹브라우저는 서버의 호스트 명을 IP로 변환
  - 웹브라우저는 URL에서 포트번호 추출
  - 웹브라우저는 웹 서버와 TCP 커넥션 맺음
  - 웹브라우저는 서버에 HTTP 요청
  - 서버는 웹브라우저에 HTTP 응답
  - 커넥션이 닫히면, 웹브라우저는 문서 노출

## 1.7 프로토콜 버전

- HTTP/1.0
  - 헤더
  - GET 이외의 추가 메서드 (POST, PUT, DELETE, PATCH, ...)
  - 멀티미디어 객체
- HTTP/1.0+
  - keep-alive 커넥션
  - 가상 호스팅 지원
  - 프락시 연결 지원
- HTTP/1.1
  - HTTP의 설계의 구조적 결합 교정
  - 두드러진 성능 최적화
  - 잘못된 기능 제거
- HTTP/2.0
  - HTTP/1.1 성능 문제 개선을 위해 SPDY 설계 진행 중

## 1.8 웹의 구성요소

- Proxy
  - 클라이언트와 서버 사이에 위치한 HTTP 중개자
- Cache
  - 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고
- Gateway
  - 다른 애플리케이션과 연결된 특별한 웹 서버
- Tunnel
  - HTTP 통신을 전달하기만 하는 특별한 Proxy
- Agent
  - 자동화된 HTTP 요청을 만드는 준지능적(semi-intelligent) 웹클라이언트

### 1.8.1 Proxy

- 사용자를 대신하여 서버에 접근
- 보안을 위해 사용
- 요청과 응답 필터링

### 1.8.2 Cache

- 웹 캐시 / 캐시 프락시
- 자주 찾는 것의 사본을 저장해 두는 특별한 종류의 HTTP 프락시 서버

### 1.8.3 Gateway

- HTTP 트래픽을 다른 프로토콜로 변화하기 위해 사용
- Client는 Gateway와 통신하고 있음을 인지하지 못함

### 1.8.4 Tunnel

- 두 커넥션 사이에서 raw 데이터를 열어보지 않고 그대로 전달해주는 HTTP Application
- HTTP 터널은 주로 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송

### 1.8.5 Agent

- 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램
